---
import Layout from '../layouts/Layout.astro';

const translations = {
  en: {
    heroTitle: "BUILD YOUR DREAM",
    heroSubtitle: "THE ULTIMATE 3D SPORTSTER CONFIGURATOR",
    joinBeta: "JOIN THE BETA",
    emailPlaceholder: "ENTER YOUR EMAIL",
    footerLegal: "LEGAL",
    footerPrivacy: "PRIVACY",
    footerCookies: "COOKIES",
    cookieText: "We use cookies to improve your experience. By continuing, you accept our ",
    cookieAccept: "ACCEPT"
  },
  es: {
    heroTitle: "CONSTRUYE TU SUEÑO",
    heroSubtitle: "EL CONFIGURADOR 3D DEFINITIVO PARA SPORTSTER",
    joinBeta: "ÚNETE A LA BETA",
    emailPlaceholder: "TU CORREO ELECTRÓNICO",
    footerLegal: "LEGAL",
    footerPrivacy: "PRIVACIDAD",
    footerCookies: "COOKIES",
    cookieText: "Utilizamos cookies para mejorar tu experiencia. Al continuar, aceptas nuestra ",
    cookieAccept: "ACEPTAR"
  },
  de: {
    heroTitle: "BAU DEINEN TRAUM",
    heroSubtitle: "DER ULTIMATIVE 3D SPORTSTER KONFIGURATOR",
    joinBeta: "BETA BEITRETEN",
    emailPlaceholder: "DEINE E-MAIL",
    footerLegal: "RECHTLICHES",
    footerPrivacy: "DATENSCHUTZ",
    footerCookies: "COOKIES",
    cookieText: "Wir verwenden Cookies, um Ihre Erfahrung zu verbessern. Mit der Fortsetzung akzeptieren Sie unsere ",
    cookieAccept: "AKZEPTIEREN"
  },
  it: {
    heroTitle: "COSTRUISCI IL TUO SOGNO",
    heroSubtitle: "IL CONFIGURATORE 3D SPORTSTER DEFINITIVO",
    joinBeta: "UNISCITI ALLA BETA",
    emailPlaceholder: "LA TUA EMAIL",
    footerLegal: "LEGALE",
    footerPrivacy: "PRIVACY",
    footerCookies: "COOKIES",
    cookieText: "Utilizziamo i cookie per migliorare la tua esperienza. Continuando, accetti la nostra ",
    cookieAccept: "ACCETTA"
  },
  fr: {
    heroTitle: "CONSTRUISEZ VOTRE RÊVE",
    heroSubtitle: "LE CONFIGURATEUR 3D SPORTSTER ULTIME",
    joinBeta: "REJOINDRE LA BÊTA",
    emailPlaceholder: "VOTRE E-MAIL",
    footerLegal: "MENTIONS LÉGALES",
    footerPrivacy: "CONFIDENTIALITÉ",
    footerCookies: "COOKIES",
    cookieText: "Nous utilisons des cookies pour améliorer votre expérience. En continuant, vous acceptez notre ",
    cookieAccept: "ACCEPTER"
  }
};
---

<Layout title="Sportster Inspiration | 3D Configurator">
  <main class="relative h-screen w-full overflow-hidden bg-black">
    
    <div class="absolute inset-0 z-0">
      <img 
        src="/hero-moto.jpg" 
        alt="Harley Sportster Custom" 
        class="h-full w-full object-cover opacity-60"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/50"></div>
    </div>

    <div class="relative z-10 flex h-full flex-col items-center justify-center px-6 text-center">
      <h1 class="mb-2 text-6xl font-black italic tracking-tighter text-white md:text-9xl" data-key="heroTitle">
        BUILD YOUR DREAM
      </h1>
      <p class="mb-12 text-xs font-bold tracking-[0.3em] text-zinc-400 md:text-sm" data-key="heroSubtitle">
        THE ULTIMATE 3D SPORTSTER CONFIGURATOR
      </p>

      <form 
        id="join"
        action="https://assets.mailerlite.com/jsonp/2073020/forms/177926962836145822/subscribe" 
        method="POST" 
        class="flex w-full max-w-md flex-col gap-2 md:flex-row md:gap-0"
      >
        <input 
          type="email" 
          name="fields[email]" 
          placeholder="ENTER YOUR EMAIL" 
          required 
          class="flex-grow bg-black/80 border border-zinc-800 px-6 py-4 text-xs font-bold text-white outline-none focus:border-orange-600 transition-colors placeholder:text-zinc-600"
          data-key="emailPlaceholder"
        />
        <button 
          type="submit" 
          class="bg-white px-8 py-4 text-xs font-bold uppercase tracking-widest text-black hover:bg-orange-600 hover:text-white transition-all duration-300"
          data-key="joinBeta"
        >
          JOIN BETA
        </button>
      </form>
    </div>

    <div class="absolute bottom-10 right-10 z-20">
      <select 
        id="langSelector" 
        class="bg-zinc-900 text-white border border-zinc-800 text-[10px] font-bold py-2 px-3 uppercase outline-none cursor-pointer hover:border-orange-600 transition-colors"
      >
        <option value="en">EN</option>
        <option value="es">ES</option>
        <option value="de">DE</option>
        <option value="it">IT</option>
        <option value="fr">FR</option>
      </select>
    </div>
  </main>
</Layout>

<script is:inline define:vars={{ translations }}>
  const langSelector = document.getElementById('langSelector');
  
  function updateLanguage(lang) {
    document.querySelectorAll('[data-key]').forEach(el => {
      const key = el.getAttribute('data-key');
      if (translations[lang][key]) {
        if (el.tagName === 'INPUT') {
          el.placeholder = translations[lang][key];
        } else {
          el.innerText = translations[lang][key];
        }
      }
    });
    localStorage.setItem('preferred-lang', lang);
    langSelector.value = lang;
  }

  langSelector.addEventListener('change', (e) => updateLanguage(e.target.value));

  // Detectar idioma inicial
  const savedLang = localStorage.getItem('preferred-lang');
  const browserLang = navigator.language.split('-')[0];
  const defaultLang = savedLang || (translations[browserLang] ? browserLang : 'en');
  
  updateLanguage(defaultLang);
</script>